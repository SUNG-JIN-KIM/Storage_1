<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>다:룸 - 나를 담는 공간</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet" />
    <style>
        :root {
          --primary: #6c63ff;
          --secondary: #e7e6fb;
          --bg: #fafafa;
          --card-bg: #ffffff;
          --text-dark: #2d2d2d;
          --text-light: #777;
        }
        body {
          margin: 0;
          font-family: 'Roboto', sans-serif;
          background-color: var(--bg);
          color: var(--text-dark);
          transition: background-color 0.3s, color 0.3s;
        }
        body.dark-mode {
          --bg: #202124;
          --card-bg: #2a2b2f;
          --text-dark: #f1f1f1;
          --text-light: #bbb;
        }
        .navbar {
          background-color: var(--card-bg);
          padding: 16px 24px;
          display: flex;
          justify-content: space-between;
          align-items: center;
          box-shadow: 0 2px 8px rgba(0,0,0,0.06);
          position: sticky;
          top: 0;
          z-index: 100;
        }
        .navbar h1 {
          font-size: 1.5rem;
          font-weight: 700;
          color: var(--primary);
          display: flex;
          align-items: center;
          margin: 0;
        }
        .navbar h1::before {
          content: "🏠";
          margin-right: 10px;
        }
        .menu {
          display: flex;
          gap: 20px;
        }
        .menu a {
          text-decoration: none;
          color: var(--text-light);
          font-weight: 500;
        }
        .menu a:hover {
          color: var(--primary);
        }
        .hamburger {
          display: none;
          flex-direction: column;
          cursor: pointer;
          gap: 4px;
        }
        .hamburger span {
          width: 24px;
          height: 3px;
          background: var(--text-light);
          transition: all 0.3s;
        }
        .menu-mobile {
          display: none;
          flex-direction: column;
          gap: 12px;
          margin-top: 10px;
          padding: 0 24px;
        }
        .menu-mobile a {
          color: var(--text-light);
          text-decoration: none;
          font-weight: 500;
        }
        .main-content {
          max-width: 960px;
          margin: 40px auto;
          padding: 0 20px;
          text-align: center;
        }
        .main-content h2 {
          font-size: 2.2rem;
          color: var(--primary);
          margin-bottom: 8px;
        }
        .main-content h3 {
          font-weight: 400;
          font-size: 1.2rem;
          color: var(--text-light);
          margin-bottom: 24px;
        }
        .recent-search-wrapper {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 12px;
          margin-bottom: 30px;
        }
        .recent-box {
          background-color: var(--secondary);
          padding: 10px 20px;
          border-radius: 8px;
          font-weight: 500;
          color: var(--primary);
        }
        #searchBox {
          width: 46%;
          max-width: 320px;
          padding: 12px 16px;
          font-size: 1rem;
          border-radius: 8px;
          border: 1px solid #ccc;
          outline: none;
          transition: box-shadow 0.2s;
        }
        #searchBox:focus {
          border-color: var(--primary);
          box-shadow: 0 0 6px rgba(108, 99, 255, 0.4);
        }
        .section {
          margin-top: 50px;
          text-align: left;
        }
        .section h3 {
          font-size: 1.4rem;
          color: var(--primary);
          border-bottom: 2px solid var(--secondary);
          padding-bottom: 6px;
          margin-bottom: 20px;
        }
        .card-grid {
          display: flex;
          flex-wrap: wrap;
          gap: 20px;
          justify-content: center;
        }
        .card {
          background-color: var(--card-bg);
          padding: 20px;
          border-radius: 12px;
          box-shadow: 0 2px 10px rgba(0,0,0,0.05);
          max-width: 240px;
          text-align: center;
          transition: transform 0.2s;
        }
        .card:hover {
          transform: translateY(-5px);
        }
        .card img {
          width: 48px;
          height: 48px;
          margin-bottom: 10px;
        }
        .card h4 {
          font-size: 1.1rem;
          margin: 10px 0 8px;
          color: var(--text-dark);
        }
        .card p {
          font-size: 0.9rem;
          color: var(--text-light);
          margin-bottom: 12px;
        }
        .card a,
        .card button {
          background-color: var(--primary);
          color: #fff;
          border: none;
          border-radius: 6px;
          padding: 8px 12px;
          font-size: 0.9rem;
          margin: 4px;
          cursor: pointer;
          text-decoration: none;
        }
        footer {
          text-align: center;
          font-size: 0.85rem;
          color: var(--text-light);
          padding: 40px 10px 20px;
        }
        @media (max-width: 600px) {
          .menu { display: none; }
          .hamburger { display: flex; }
          .menu-mobile.show { display: flex; }
        }
        @media (prefers-color-scheme: dark) {
          body:not(.light-mode) {
            --bg: #202124;
            --card-bg: #2a2b2f;
            --text-dark: #f1f1f1;
            --text-light: #bbb;
          }
        }
    </style>
</head>
<body>
<nav class="navbar">
    <h1>마루</h1>
    <div class="menu">
        <a href="#home">홈</a>
        <a href="#features">기능</a>
        <a href="#contact" onclick="alert('준비 중입니다.'); return false;">문의</a>
    </div>
    <div class="hamburger" onclick="toggleMobileMenu()">
        <span></span>
        <span></span>
        <span></span>
    </div>
</nav>
<div class="menu-mobile" id="mobileMenu">
    <a href="#home">홈</a>
    <a href="#features">기능</a>
    <a href="#contact" onclick="alert('준비 중입니다.'); return false;">문의</a>
</div>

<main id="home" class="main-content">
    <h2>🛖다:룸에 오신걸 환영합니다.🐕</h2>
    <h3>"다양하게 룸을 채운다”는 의미를 뜻합니다!</h3>
    <p>원하는 기능을 선택하거나 검색해보세요.</p>

    <div class="recent-search-wrapper">
        <div class="recent-box">최근 사용한 기능: <span id="recentFeature">없음</span></div>
        <input id="searchBox" type="search" placeholder="기능명으로 검색..." />
    </div>

    <div id="featureSections"></div>
</main>

<footer>
    ⓒ 2025 마루. Portfolio .
</footer>

<script>
    const featureData = [
      {
        title: "📦 기본 기능",
        items: [
          { name: "계산기", icon: "https://img.icons8.com/fluency/48/calculator.png", type: "calculator", description: "입력식/버튼식 계산기 제공" },
          { name: "회원 등록", icon: "https://img.icons8.com/color/48/name.png", link: "/register", description: "간단한 회원 등록 페이지" }
        ]
      },
      {
        title: "🎮 게임 / 인터랙션",
        items: [
          { name: "Up N Down!!", icon: "images/icons8-number-48.png", link: "/guess", description: "숫자 추리 게임" },
          { name: "미로 게임", icon: "images/icons8-m-50.png", link: "/maze", description: "간단한 미로 탈출 게임" }
        ]
      },
      {
        title: "📄 기타 페이지",
        items: [
          { name: "헬로", icon: "images/icons8-me.-48.png", link: "/hellos", description: "간단 인사 기능" },
          { name: "KSJ", icon: "https://img.icons8.com/color/48/person-male.png", link: "/ksj", description: "KSJ 정보 보기" },
          { name: "ToDo 리스트", icon: "images/icons8-list-with-title-48.png", link: "/todo", description: "할 일 목록 관리" },
          { name: "메모장", icon: "images/icons8-memo-48.png", link: "/memo", description: "메모 작성 및 보기" }
        ]
      }
    ];

    const container = document.getElementById("featureSections");
    const recentFeatureSpan = document.getElementById("recentFeature");
    const searchBox = document.getElementById("searchBox");

    function renderSections(data = featureData) {
      container.innerHTML = "";
      data.forEach(section => {
        if (!section.items.some(item => item.visible !== false)) return;

        const sectionDiv = document.createElement("div");
        sectionDiv.className = "section";
        sectionDiv.id = "features";

        const title = document.createElement("h3");
        title.textContent = section.title;
        sectionDiv.appendChild(title);

        const grid = document.createElement("div");
        grid.className = "card-grid";

        section.items.forEach(item => {
          if (item.visible === false) return;

          const card = document.createElement("div");
          card.className = "card";

          const img = document.createElement("img");
          img.src = item.icon;
          card.appendChild(img);

          const name = document.createElement("h4");
          name.textContent = item.name;
          card.appendChild(name);

          const desc = document.createElement("p");
          desc.textContent = item.description;
          card.appendChild(desc);

          if (item.type === "calculator") {
            ["입력식 계산기", "버튼식 계산기"].forEach((label, idx) => {
              const btn = document.createElement("button");
              btn.textContent = label;
              btn.onclick = () => {
                localStorage.setItem("recentFeature", label);
                window.location.href = idx === 0 ? "/calculator" : "/button-calculator";
              };
              card.appendChild(btn);
            });
          } else {
            const link = document.createElement("a");
            link.href = item.link;
            link.textContent = "이동";
            link.onclick = () => {
              localStorage.setItem("recentFeature", item.name);
            };
            card.appendChild(link);
          }

          grid.appendChild(card);
        });

        sectionDiv.appendChild(grid);
        container.appendChild(sectionDiv);
      });
    }

    function filterFeatures(keyword) {
      const lower = keyword.trim().toLowerCase();
      if (!lower) {
        featureData.forEach(s => s.items.forEach(i => i.visible = true));
        return featureData;
      }
      return featureData.map(section => ({
        ...section,
        items: section.items.map(item => ({
          ...item,
          visible: item.name.toLowerCase().includes(lower)
        }))
      }));
    }

    function toggleMobileMenu() {
      document.getElementById("mobileMenu").classList.toggle("show");
    }

    window.onload = () => {
      const recent = localStorage.getItem("recentFeature");
      if (recent) recentFeatureSpan.textContent = recent;
      renderSections();
      searchBox.addEventListener("input", e => {
        const filtered = filterFeatures(e.target.value);
        renderSections(filtered);
      });

      if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark-mode');
      }
    };
</script>
</body>
</html>
